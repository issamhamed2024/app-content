(function(){var e={2385:function(e,t,a){"use strict";var s=a(5130),n=a(6768);function o(e,t,a,s,o,l){const r=(0,n.g2)("notifications"),i=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(r,{position:"top center"}),(0,n.bF)(i)])}a(323);var l={name:"App"},r=a(1241);const i=(0,r.A)(l,[["render",o]]);var d=i,c=a(7278),u=a(1387);const m=e=>((0,n.Qi)("data-v-0786cb0a"),e=e(),(0,n.jt)(),e),h={class:"container-fluid text-end px-5 pb-5"},p={class:"row mb-4"},f={class:"col-sm-2"},b=m((()=>(0,n.Lk)("div",{class:"col-sm-8"},null,-1))),g={class:"col-sm-2"},k=m((()=>(0,n.Lk)("div",{class:"col-sm-12 mt-5 pt-3"},null,-1))),y=m((()=>(0,n.Lk)("div",{class:"col-sm-2"},[(0,n.Lk)("h1",{class:""},"الممثلين")],-1))),L=m((()=>(0,n.Lk)("div",{class:"col-sm-8"},null,-1))),v={class:"col-sm-2"},x={class:"row pb-5"},D={style:{display:"none"}};function w(e,t,a,s,o,l){const r=(0,n.g2)("SearchForm"),i=(0,n.g2)("UserToggle"),d=(0,n.g2)("NewModal"),c=(0,n.g2)("UsersTable"),u=(0,n.g2)("ag-grid-vue");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",h,[(0,n.Lk)("div",p,[(0,n.Lk)("div",f,[(0,n.bF)(r,{searchText:o.searchText,"onUpdate:searchText":t[0]||(t[0]=e=>o.searchText=e)},null,8,["searchText"])]),b,(0,n.Lk)("div",g,[(0,n.bF)(i)]),k,y,L,(0,n.Lk)("div",v,[(0,n.Lk)("button",{class:"btn btn-warning",href:"#",onClick:t[1]||(t[1]=(...e)=>l.handleButtonClick&&l.handleButtonClick(...e)),id:"exampleModalBtn"},"جديد"),(0,n.Lk)("button",{class:"btn btn-warning d-none",href:"#",onClick:t[2]||(t[2]=(...e)=>l.handleButtonClick2&&l.handleButtonClick2(...e)),id:"exampleModalBtn2"},"جديد")])]),(0,n.Lk)("div",x,[(0,n.bF)(d,{current_data:o.current_data,onReload:l.reloadData},null,8,["current_data","onReload"]),(0,n.bF)(c,{onSend_current_data:l.send_current_data,searchText:o.searchText,ref:"UsersTableRef"},null,8,["onSend_current_data","searchText"])])]),(0,n.Lk)("div",D,[(0,n.bF)(u,{columnDefs:o.columnDefs,rowData:l.filteredRequests,domLayout:"autoHeight",gridAutoHeight:!0,class:"ag-theme-quartz custom-ag-grid",enableRtl:!0,rowHeight:40,pagination:!0},null,8,["columnDefs","rowData"])])],64)}var C=a(3505),S=a(8355),M=a(9122),A=a.n(M);const _="https://new-app-content-dcc934885c58.herokuapp.com",$={class:"input-group",id:"search"},E=(0,n.Lk)("span",{class:"btn btn-outline-secondary",style:{"padding-top":"10px !important"}},[(0,n.Lk)("i",{class:"fa-solid fa-magnifying-glass"})],-1);function q(e,t,a,o,l,r){return(0,n.uX)(),(0,n.CE)("div",$,[E,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",placeholder:"بحث","onUpdate:modelValue":t[0]||(t[0]=e=>l.localSearchText=e),onInput:t[1]||(t[1]=(...e)=>r.updateSearchText&&r.updateSearchText(...e))},null,544),[[s.Jo,l.localSearchText]])])}var N={name:"SearchForm",props:["searchText"],data(){return{localSearchText:this.searchText}},methods:{updateSearchText(){this.$emit("update:searchText",this.localSearchText)}},watch:{searchText(e){this.localSearchText=e}}};const T=(0,r.A)(N,[["render",q]]);var U=T;const F={class:"dropdown",id:"user-dropdwon"},B=(0,n.Lk)("button",{class:"btn dropdown-toggle text-start",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,n.Lk)("img",{src:"https://ps.w.org/user-avatar-reloaded/assets/icon-256x256.png?rev=2540745",alt:""}),(0,n.Lk)("strong",null,"عبد العزيز")],-1),I=(0,n.Lk)("ul",{class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},[(0,n.Lk)("li",null,[(0,n.Lk)("a",{class:"dropdown-item",href:"#"},"تسجيل الخروج")])],-1),R=[B,I];function P(e,t,a,s,o,l){return(0,n.uX)(),(0,n.CE)("div",F,R)}var H={name:"UserToggle"};const V=(0,r.A)(H,[["render",P]]);var O=V,j=a(4232);const J=e=>((0,n.Qi)("data-v-614f899d"),e=e(),(0,n.jt)(),e),W={class:"modal fade",id:"NotesModal",ref:"notesModal",tabindex:"-1","aria-hidden":"true"},X={class:"modal-dialog modal-lg"},Q=J((()=>(0,n.Lk)("div",{class:"modal-header"},[(0,n.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},"تحديث الملاحظات"),(0,n.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),z={class:"modal-body"},G={class:"row"},K={class:"col-sm-12"},Y={class:"mb-3"},Z=J((()=>(0,n.Lk)("label",{class:"form-label"},"ملاحظات",-1))),ee=J((()=>(0,n.Lk)("div",{class:"modal-footer"},[(0,n.Lk)("button",{type:"button",class:"closeModalbtnNotes btn btn-secondary","data-bs-dismiss":"modal"},"تراجع"),(0,n.Lk)("button",{type:"submit",class:"saveUserbtnNotes btn btn-primary"},"حفظ الآن")],-1))),te={class:"modal fade",id:"actionsModal",ref:"actionsModal",tabindex:"-1","aria-hidden":"true"},ae={class:"modal-dialog modal-sm"},se=J((()=>(0,n.Lk)("div",{class:"modal-header"},[(0,n.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},"الإجراءات"),(0,n.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),ne={class:"modal-body"},oe={class:"row"},le={class:"col-sm-12"},re={class:"mb-3"},ie={class:"custom-checkbox"},de=J((()=>(0,n.Lk)("span",{class:"checkmark"},null,-1))),ce=J((()=>(0,n.Lk)("span",{class:"checkbox_label"},"تم التعامل سابقا",-1))),ue={class:"custom-checkbox"},me=J((()=>(0,n.Lk)("span",{class:"checkmark"},null,-1))),he=J((()=>(0,n.Lk)("span",{class:"checkbox_label"},"لم يتم التعامل",-1))),pe={class:"custom-checkbox"},fe=J((()=>(0,n.Lk)("span",{class:"checkmark"},null,-1))),be=J((()=>(0,n.Lk)("span",{class:"checkbox_label"},"ممتاز",-1))),ge={class:"custom-checkbox"},ke=J((()=>(0,n.Lk)("span",{class:"checkmark"},null,-1))),ye=J((()=>(0,n.Lk)("span",{class:"checkbox_label"},"غير ممتاز",-1))),Le={class:"modal-footer modal-footer-actions"},ve=J((()=>(0,n.Lk)("button",{type:"submit",class:"saveUserbtnActions btn btn-primary float-end"},"حفظ",-1))),xe=J((()=>(0,n.Lk)("button",{type:"button",class:"closeModalbtnActions btn btn-secondary float-end","data-bs-dismiss":"modal"},"تراجع",-1))),De={class:"modal fade",id:"attachementsModal",ref:"attachementsModal",tabindex:"-1","aria-hidden":"true"},we={class:"modal-dialog modal-lg"},Ce=J((()=>(0,n.Lk)("div",{class:"modal-header"},[(0,n.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},"تحديث الأعمال"),(0,n.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Se={class:"modal-body"},Me={class:"row"},Ae={class:"col-sm-12"},_e={class:"mb-3"},$e={class:"row"},Ee=["href"],qe=J((()=>(0,n.Lk)("div",{class:"modal-footer"},[(0,n.Lk)("button",{type:"button",class:"closeModalbtnAttachements btn btn-secondary","data-bs-dismiss":"modal"},"تراجع"),(0,n.Lk)("button",{type:"submit",class:"saveUserbtnAttachements btn btn-primary"},"حفظ الآن")],-1)));function Ne(e,t,a,o,l,r){const i=(0,n.g2)("ag-grid-vue"),d=(0,n.g2)("NewModal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(i,{columnDefs:l.columnDefs,rowData:r.filteredDatas,defaultColDef:l.defaultColDef,quickFilterText:a.searchText,domLayout:"autoHeight",gridAutoHeight:!0,class:"ag-theme-quartz custom-ag-grid",enableRtl:!0,rowHeight:60,pagination:!0,getRowStyle:r.getRowStyle,onModelUpdated:r.onModelUpdated},null,8,["columnDefs","rowData","defaultColDef","quickFilterText","getRowStyle","onModelUpdated"]),(0,n.Lk)("div",W,[(0,n.Lk)("div",X,[(0,n.Lk)("form",{class:"modal-content",onSubmit:t[1]||(t[1]=(0,s.D$)(((...e)=>r.handleSubmitNotes&&r.handleSubmitNotes(...e)),["prevent"]))},[Q,(0,n.Lk)("div",z,[(0,n.Lk)("div",G,[(0,n.Lk)("div",K,[(0,n.Lk)("div",Y,[Z,(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.current_notes=e),class:"form-control",rows:"5"},null,512),[[s.Jo,l.current_notes]])])])])]),ee],32)])],512),(0,n.Lk)("div",te,[(0,n.Lk)("div",ae,[(0,n.Lk)("form",{class:"modal-content",onSubmit:t[8]||(t[8]=(0,s.D$)(((...e)=>r.handleSubmitActions&&r.handleSubmitActions(...e)),["prevent"]))},[se,(0,n.Lk)("div",ne,[(0,n.Lk)("div",oe,[(0,n.Lk)("div",le,[(0,n.Lk)("div",re,[(0,n.Lk)("label",ie,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>l.isChecked1=e)},null,512),[[s.lH,l.isChecked1]]),de,ce]),(0,n.Lk)("label",ue,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>l.isChecked2=e)},null,512),[[s.lH,l.isChecked2]]),me,he]),(0,n.Lk)("label",pe,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>l.isChecked3=e)},null,512),[[s.lH,l.isChecked3]]),fe,be]),(0,n.Lk)("label",ge,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>l.isChecked4=e)},null,512),[[s.lH,l.isChecked4]]),ke,ye])])])])]),(0,n.Lk)("div",Le,[(0,n.Lk)("button",{type:"button",onClick:t[6]||(t[6]=(0,s.D$)(((...e)=>r.deleteUser&&r.deleteUser(...e)),["prevent"])),class:"deleteModalbtnActions btn btn-danger float-start"},"حذف"),(0,n.Lk)("button",{type:"button",onClick:t[7]||(t[7]=(0,s.D$)(((...e)=>r.editUser&&r.editUser(...e)),["prevent"])),class:"editModalbtnActions btn btn-success float-start"},"تعديل"),ve,xe])],32)])],512),(0,n.Lk)("div",De,[(0,n.Lk)("div",we,[(0,n.Lk)("form",{class:"modal-content",id:"exampleModalLabelFormAtt",onSubmit:t[10]||(t[10]=(0,s.D$)(((...e)=>r.handleSubmitAttachements&&r.handleSubmitAttachements(...e)),["prevent"]))},[Ce,(0,n.Lk)("div",Se,[(0,n.Lk)("div",Me,[(0,n.Lk)("div",Ae,[(0,n.Lk)("div",_e,[(0,n.Lk)("input",{type:"file",onChange:t[9]||(t[9]=(...e)=>r.handleFiles&&r.handleFiles(...e)),multiple:"",required:"",accept:"image/*,.pdf,.txt,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,video/*",class:"form-control"},null,32),(0,n.Lk)("div",$e,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.current_attachements,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"col-sm-4",key:t},[(0,n.Lk)("a",{href:`${l.serverUrl}/uploads/images/${e}`,target:"_blank",class:"an-attachement"},[(0,n.Lk)("strong",null,(0,j.v_)(e),1)],8,Ee)])))),128))])])])])]),qe],32)])],512),(0,n.bF)(d,{data:l.current_data,onReload:r.reloadData},null,8,["data","onReload"])])}a(4114);var Te=a(9953),Ue=a.n(Te);const Fe={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Be={class:"modal-dialog modal-lg"},Ie={class:"modal-header"},Re={key:0,class:"modal-title",id:"exampleModalLabel"},Pe={key:1,class:"modal-title",id:"exampleModalLabel"},He=(0,n.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Ve={class:"modal-body"},Oe={class:"row"},je={class:"col-sm-6"},Je={class:"mb-3"},We=(0,n.Lk)("label",{class:"form-label"},"الصورة",-1),Xe={class:"col-sm-6"},Qe={class:"mb-3"},ze=(0,n.Lk)("label",{class:"form-label"},[(0,n.eW)("الإسم "),(0,n.Lk)("span",{class:"text-danger"},"*")],-1),Ge={class:"col-sm-6"},Ke={class:"mb-3"},Ye=(0,n.Lk)("label",{class:"form-label"},[(0,n.eW)("الجنس "),(0,n.Lk)("span",{class:"text-danger"},"*")],-1),Ze=(0,n.Lk)("option",{value:"male"},"ذكر",-1),et=(0,n.Lk)("option",{value:"female"},"أنثى",-1),tt=[Ze,et],at={class:"col-sm-6"},st={class:"mb-3"},nt=(0,n.Lk)("label",{class:"form-label"},[(0,n.eW)("الجنسية "),(0,n.Lk)("span",{class:"text-danger"},"*")],-1),ot={class:"col-sm-6 mb-3"},lt=(0,n.Lk)("label",{class:"form-label"},[(0,n.eW)("المدينة "),(0,n.Lk)("span",{class:"text-danger"},"*")],-1),rt={class:"input-group"},it=(0,n.Lk)("span",{class:"input-group-text"},[(0,n.Lk)("i",{class:"fas fa-globe"})],-1),dt={class:"col-sm-6"},ct={class:"mb-3"},ut=(0,n.Lk)("label",{class:"form-label"},[(0,n.eW)("العمر "),(0,n.Lk)("span",{class:"text-danger"},"*")],-1),mt={class:"col-sm-6"},ht=(0,n.Lk)("label",{class:"form-label"},[(0,n.eW)("التكلفة "),(0,n.Lk)("span",{class:"text-danger"},"*")],-1),pt={class:"input-group"},ft=(0,n.Lk)("span",{class:"input-group-text"},[(0,n.Lk)("i",{class:"fas fa-dollar-sign"})],-1),bt={class:"col-sm-6 mb-3"},gt=(0,n.Lk)("label",{class:"form-label"},[(0,n.eW)("الجوال "),(0,n.Lk)("span",{class:"text-danger"},"*")],-1),kt={class:"input-group"},yt=(0,n.Lk)("span",{class:"input-group-text"},[(0,n.Lk)("i",{class:"fa fa-phone"})],-1),Lt={class:"col-sm-6"},vt={class:"mb-3"},xt=(0,n.Lk)("label",{class:"form-label"},[(0,n.eW)("الحالة "),(0,n.Lk)("span",{class:"text-danger"},"*")],-1),Dt=(0,n.Lk)("option",{value:"1"},"فعال",-1),wt=(0,n.Lk)("option",{value:"0"},"غير فعال",-1),Ct=[Dt,wt],St={class:"col-sm-6 mb-3"},Mt=(0,n.Lk)("label",{class:"form-label"},"الإجراءات ",-1),At=(0,n.Lk)("option",{value:"1"},"تم التعامل سابقا",-1),_t=(0,n.Lk)("option",{value:"2"},"لم يتم التعامل",-1),$t=(0,n.Lk)("option",{value:"3"},"ممتاز",-1),Et=(0,n.Lk)("option",{value:"4"},"غير ممتاز",-1),qt=[At,_t,$t,Et],Nt={class:"col-sm-12"},Tt={class:"mb-3"},Ut=(0,n.Lk)("label",{class:"form-label"},"ملاحظات",-1),Ft=(0,n.Lk)("div",{class:"modal-footer"},[(0,n.Lk)("button",{type:"button",class:"closeModalbtn btn btn-secondary","data-bs-dismiss":"modal"},"تراجع"),(0,n.Lk)("button",{type:"submit",class:"saveUserbtn btn btn-primary"},"حفظ الآن")],-1);function Bt(e,t,a,o,l,r){return(0,n.uX)(),(0,n.CE)("div",Fe,[(0,n.Lk)("div",Be,[(0,n.Lk)("form",{class:"modal-content",onSubmit:t[11]||(t[11]=(0,s.D$)(((...e)=>r.handleSubmit&&r.handleSubmit(...e)),["prevent"])),id:"exampleModalLabelForm"},[(0,n.Lk)("div",Ie,[a.current_data?((0,n.uX)(),(0,n.CE)("h5",Re,"تعديل")):((0,n.uX)(),(0,n.CE)("h5",Pe,"إضافة جديد")),He]),(0,n.Lk)("div",Ve,[(0,n.Lk)("div",Oe,[(0,n.Lk)("div",je,[(0,n.Lk)("div",Je,[We,(0,n.Lk)("input",{type:"file",accept:"image/*",class:"form-control",onChange:t[0]||(t[0]=(...e)=>r.handleImage&&r.handleImage(...e))},null,32)])]),(0,n.Lk)("div",Xe,[(0,n.Lk)("div",Qe,[ze,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>l.formData.name=e),class:"form-control",required:""},null,512),[[s.Jo,l.formData.name]])])]),(0,n.Lk)("div",Ge,[(0,n.Lk)("div",Ke,[Ye,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.formData.gender=e),id:"",class:"form-control",required:""},tt,512),[[s.u1,l.formData.gender]])])]),(0,n.Lk)("div",at,[(0,n.Lk)("div",st,[nt,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.formData.nationality=e),class:"form-control",required:""},null,512),[[s.Jo,l.formData.nationality]])])]),(0,n.Lk)("div",ot,[lt,(0,n.Lk)("div",rt,[it,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>l.formData.city=e),class:"form-control",required:""},null,512),[[s.Jo,l.formData.city]])])]),(0,n.Lk)("div",dt,[(0,n.Lk)("div",ct,[ut,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>l.formData.age=e),class:"form-control",required:""},null,512),[[s.Jo,l.formData.age]])])]),(0,n.Lk)("div",mt,[ht,(0,n.Lk)("div",pt,[ft,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>l.formData.price=e),class:"form-control",required:""},null,512),[[s.Jo,l.formData.price]])])]),(0,n.Lk)("div",bt,[gt,(0,n.Lk)("div",kt,[yt,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>l.formData.mobile=e),class:"form-control",required:""},null,512),[[s.Jo,l.formData.mobile]])])]),(0,n.Lk)("div",Lt,[(0,n.Lk)("div",vt,[xt,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.formData.status=e),id:"",class:"form-control",required:""},Ct,512),[[s.u1,l.formData.status]])])]),(0,n.Lk)("div",St,[Mt,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.formData.actions=e),id:"",class:"form-control",multiple:""},qt,512),[[s.u1,l.formData.actions]])]),(0,n.Lk)("div",Nt,[(0,n.Lk)("div",Tt,[Ut,(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.formData.notes=e),class:"form-control",rows:"5"},null,512),[[s.Jo,l.formData.notes]])])])])]),Ft],32)])])}var It={name:"NewModal",props:["current_data"],data(){return{image:null,formData:{name:"",gender:"male",nationality:"",city:"",age:30,price:"",mobile:"",status:1,notes:"",actions:"",id:null}}},watch:{current_data(e){e&&(this.formData.id=e?e.idd:"",this.formData.name=e?e.name:"",this.formData.gender=e?"ذكر"==e.gender?"male":"female":"ذكر",this.formData.nationality=e?e.nationality:"",this.formData.city=e?e.city:"",this.formData.age=e?e.age:"",this.formData.price=e?e.price:"",this.formData.mobile=e?e.mobile:"",this.formData.status=e?e.status:"",this.formData.notes=e?e.notes:"","string"===typeof e?.actions&&""!==e?.actions.trim()?this.formData.actions=e.actions.split(","):this.formData.actions=[])}},methods:{handleImage(e){this.image=e.target.files[0]},async handleSubmit(){document.querySelector(".saveUserbtn").disabled=!0,document.querySelector(".closeModalbtn").disabled=!0;let e=`${_}/api/admin/saveData`;const t=new FormData;t.append("imageData",this.image),t.append("name",this.formData.name),t.append("gender",this.formData.gender),t.append("nationality",this.formData.nationality),t.append("city",this.formData.city),t.append("age",this.formData.age),t.append("price",this.formData.price),t.append("mobile",this.formData.mobile),t.append("status",this.formData.status),t.append("notes",this.formData.notes),t.append("actions",this.formData.actions),this.current_data?.id&&(t.append("id",this.formData.id),e=`${_}/api/admin/updateData`);try{const a=await S.A.post(e,t,{headers:{"Content-Type":"multipart/form-data"}});if(1==a.data.status_){const e=document.getElementById("exampleModalLabelForm");e.reset(),this.$notify({type:"success",text:"تم الحفظ بنجاح"}),this.$emit("reload"),this.formData.id=null,this.formData.name="",this.formData.gender="male",this.formData.nationality="",this.formData.city="",this.formData.age=30,this.formData.price="",this.formData.mobile="",this.formData.status=1,this.formData.notes="",this.formData.actions="",this.image=null}else console.log(a.data.message),this.$notify({type:"error",text:"لقد وقع خyttyطأ ما, الرجاء المحاولة من جديد "})}catch(a){this.$notify({type:"error",text:"لقد وقع خطأ ما, الرجاء المحاولة من جديد "}),console.error("Error uploading file:",a)}finally{document.querySelector(".saveUserbtn").disabled=!1,document.querySelector(".closeModalbtn").disabled=!1,document.querySelector(".closeModalbtn").click()}}}};const Rt=(0,r.A)(It,[["render",Bt]]);var Pt=Rt,Ht={name:"UsersTable",components:{NewModal:Pt,AgGridVue:C.b},props:["searchText"],mounted(){this.getData()},data(){return{serverUrl:_,files:null,isChecked1:!1,isChecked2:!1,isChecked3:!1,isChecked4:!1,current_id:null,current_data:null,current_notes:"",current_attachements:"",datas:[],columnDefs:[{field:"id",headerName:"#",width:50,cellClass:"text-center"},{field:"image",headerName:"الصورة",width:100,cellRenderer:this.renderImageCell},{field:"name",headerName:"الإسم"},{field:"gender",headerName:"الجنس",width:140},{field:"nationality",headerName:"الجنسية",width:140},{field:"city",headerName:"المدينة"},{field:"age",headerName:"العمر",width:140},{field:"price",headerName:"التكلفة",cellRenderer:this.renderPriceCell},{field:"mobile",headerName:"الجوال"},{field:"attachements",headerName:"الأعمال",width:140,cellClass:"text-center",cellRenderer:this.renderAttachementsCell},{field:"status",headerName:"الحالة",width:140,cellClass:"text-center",cellRenderer:this.renderSendButton},{field:"notes",headerName:"ملاحظات",width:140,cellClass:"text-center",cellRenderer:this.renderNotesCell},{field:"actions",headerName:"الإجراءات",width:140,cellClass:"text-center",cellRenderer:this.renderActionsCell}],defaultColDef:{resizable:!0,sortable:!0}}},computed:{filteredDatas(){let e=[];return this.datas.map(((t,a)=>{const s=t.image&&""!=t.image?`${_}/uploads/images/${t.image}`:`${_}/uploads/no-image.jpg`,n={id:a+1,image:s,name:t.name,gender:"male"==t.gender?"ذكر":"أنثى",nationality:t.nationality,city:t.city,age:t.age,price:t.price,mobile:t.mobile,attachements:1,status:t.status,notes:t.notes,idd:t._id,actions:t.actions,attachments:t.attachments};e.push(n)})),e.reverse(),e.map(((e,t)=>{e.id=t+1})),e}},watch:{searchText(e){console.info("myProp changed:",e)}},methods:{onModelUpdated(e){const t=e.api.getDisplayedRowCount(),a=100+80*t;document.querySelector(".ag-center-cols-viewport").style.height=`${a}px`},getRowStyle(e){const t=e.node.rowIndex,a=20+20*t;return{top:`${a}px`}},renderImageCell(e){const t=document.createElement("img");return t.src=e.value,t.alt=e.data.make,t.className="custom-image",t},renderPriceCell(e){return e.value.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},renderAttachementsCell(e){const t=document.createElement("div");return t.className="btn btn-x",t.innerHTML='<i class="fas fa-ellipsis-h"></i>',this.addClickEventListenerButtonAttachements(t,e.data),t},addClickEventListenerButtonAttachements(e,t){e.addEventListener("click",(()=>this.updateAttachements(t)))},updateAttachements(e){console.log(e),this.current_id=e.idd;let t=e.attachments||"";this.current_attachements=t.split(",").filter((e=>e));const a=this.$refs.attachementsModal;if(a){const e=new(Ue().Modal)(a);e.show()}},handleFiles(e){const t=e.target.files;this.files=Array.from(t)},async handleSubmitAttachements(){document.querySelector(".saveUserbtnAttachements").disabled=!0,document.querySelector(".closeModalbtnAttachements").disabled=!0;const e=this.current_id,t=this.files;try{const a=new FormData;for(const e of t)a.append("files",e);a.append("id",e);const s=await S.A.post(`${_}/api/admin/setDataAttachements`,a,{headers:{"Content-Type":"multipart/form-data"}});if(1==s.data.status_){this.$notify({type:"success",text:"تم تحديث الأعمال بتجاح"});let e=s.data.data||"";this.current_attachements=e.split(",").filter((e=>e));const t=document.getElementById("exampleModalLabelFormAtt");t.reset(),this.getData()}else console.error(s.data.message),this.$notify({type:"error",text:"لقد وقع خطأ ما, الرجاء المحاولة من جديد "})}catch(a){this.$notify({type:"error",text:"لقد وقع خطأ ما, الرجاء المحاولة من جديد "}),console.error("Error uploading file:",a)}finally{document.querySelector(".saveUserbtnAttachements").disabled=!1,document.querySelector(".closeModalbtnAttachements").disabled=!1}},renderSendButton(e){const t=document.createElement("div");return 1==e.value?(t.innerHTML="<span>فعال</span>",t.className="cursor-pointer badge text-success border border-success text-decoration-none px-3 py-1"):(t.innerHTML="<span>غير فعال</span>",t.className="cursor-pointer badge text-danger border border-danger text-decoration-none px-3 py-1"),this.addClickEventListenerButton(t,e.data),t},addClickEventListenerButton(e,t){e.addEventListener("click",(()=>this.setDataStatus(t)))},async setDataStatus(e){var t=e.idd,a=1==e.status?0:1;try{const e=await S.A.post(`${_}/api/admin/setDataStatus`,{id:t,status:a});1==e.data.status_?(this.$notify({type:"success",text:"تم تغيير الحالة بتجاح"}),this.getData()):(console.error(e.data.message),this.$notify({type:"error",text:"لقد وقع خطأ ما, الرجاء المحاولة من جديد "}))}catch(s){this.$notify({type:"error",text:"لقد وقع خطأ ما, الرجاء المحاولة من جديد "}),console.error("Error uploading file:",s)}},renderNotesCell(e){const t=document.createElement("div");return t.className="btn btn-x",t.innerHTML='<i class="fas fa-ellipsis-h"></i>',this.addClickEventListenerButtonNotes(t,e.data),t},addClickEventListenerButtonNotes(e,t){e.addEventListener("click",(()=>this.updateNotes(t)))},updateNotes(e){this.current_id=e.idd,this.current_notes=e.notes;const t=this.$refs.notesModal;if(t){const e=new(Ue().Modal)(t);e.show()}},async handleSubmitNotes(){document.querySelector(".saveUserbtnNotes").disabled=!0,document.querySelector(".closeModalbtnNotes").disabled=!0;const e=this.current_id,t=this.current_notes;try{const a=await S.A.post(`${_}/api/admin/setDataNotes`,{id:e,notes:t});1==a.data.status_?(this.$notify({type:"success",text:"تم تحديث الملاحظات بتجاح"}),this.getData()):(console.error(a.data.message),this.$notify({type:"error",text:"لقد وقع خطأ ما, الرجاء المحاولة من جديد "}))}catch(a){this.$notify({type:"error",text:"لقد وقع خطأ ما, الرجاء المحاولة من جديد "}),console.error("Error uploading file:",a)}finally{document.querySelector(".saveUserbtnNotes").disabled=!1,document.querySelector(".closeModalbtnNotes").disabled=!1,document.querySelector(".closeModalbtnNotes").click()}},renderActionsCell(e){const t=document.createElement("div");return t.className="btn btn-x",t.innerHTML='<i class="fas fa-ellipsis-h"></i>',this.addClickEventListenerButtonActions(t,e.data),t},addClickEventListenerButtonActions(e,t){e.addEventListener("click",(()=>this.updateActions(t)))},updateActions(e){this.current_id=e.idd,this.current_data=e;const t=e.actions||"",a=t.split(",").map((e=>parseInt(e.trim(),10)));this.isChecked1=!1,this.isChecked2=!1,this.isChecked3=!1,this.isChecked4=!1,a.forEach((e=>{1===e?this.isChecked1=!0:2===e?this.isChecked2=!0:3===e?this.isChecked3=!0:4===e&&(this.isChecked4=!0)}));const s=this.$refs.actionsModal;if(s){const e=new(Ue().Modal)(s);e.show()}},async handleSubmitActions(){document.querySelector(".saveUserbtnActions").disabled=!0,document.querySelector(".closeModalbtnActions").disabled=!0,document.querySelector(".deleteModalbtnActions").disabled=!0;const e=this.current_id,t=[];this.isChecked1&&t.push(1),this.isChecked2&&t.push(2),this.isChecked3&&t.push(3),this.isChecked4&&t.push(4);const a=t.join(",");try{const t=await S.A.post(`${_}/api/admin/setDataActions`,{id:e,actions:a});1==t.data.status_?(this.$notify({type:"success",text:"تم تحديث الإجراءات بتجاح"}),this.getData()):(console.error(t.data.message),this.$notify({type:"error",text:"لقد وقع خطأ ما, الرجاء المحاولة من جديد "}))}catch(s){this.$notify({type:"error",text:"لقد وقع خطأ ما, الرجاء المحاولة من جديد "}),console.error("Error uploading file:",s)}finally{document.querySelector(".saveUserbtnActions").disabled=!1,document.querySelector(".closeModalbtnActions").disabled=!1,document.querySelector(".deleteModalbtnActions").disabled=!1,document.querySelector(".closeModalbtnActions").click()}},async deleteUser(){const e=this.current_id,t=confirm("هل أنت متأكد أنك تريد حذف هذا المستخدم؟");if(t)try{const t=await S.A.post(`${_}/api/admin/deleteData`,{id:e});if(1==t.data.status_){this.$notify({type:"success",text:"تم الحذف بتجاح"});const e=document.querySelector(".closeModalbtnActions");e&&e.click(),this.getData()}else console.error(t.data.message),this.$notify({type:"error",text:"لقد وقع خطأ ما, الرجاء المحاولة من جديد "})}catch(a){this.$notify({type:"error",text:"لقد وقع خطأ ما, الرجاء المحاولة من جديد "}),console.error("Error uploading file:",a)}},editUser(){this.$emit("send_current_data",this.current_data);const e=document.querySelector(".closeModalbtnActions");e&&e.click(),setTimeout((function(){const e=document.querySelector("#exampleModalBtn2");e&&e.click()}),1e3)},async getData(){try{const e=await S.A.get(`${_}/api/admin/getData`);1==e.data.status_?(this.datas=e.data.datas,console.info(e.data.datas)):(console.error(e.data.message),this.$notify({type:"error",text:"لقد وقع خطأ ما, الرجاء المحاولة من جديد "}))}catch(e){this.$notify({type:"error",text:"لقد وقع خطأ ما, الرجاء المحاولة من جديد "}),console.error("Error uploading file:",e)}},reloadData(){this.getData()}}};const Vt=(0,r.A)(Ht,[["render",Ne],["__scopeId","data-v-614f899d"]]);var Ot=Vt,jt={components:{NewModal:Pt,UsersTable:Ot,UserToggle:O,SearchForm:U,AgGridVue:C.b},data(){return{searchText:"",current_data:null,requests:[],loading:!0,searchQuery:"",filteredImage:"",filteredSendDate:"",columnDefs:[{field:"id",headerName:"رقم",valueGetter:"node.rowIndex + 1"},{field:"name",headerName:"الاسم",sortable:!0},{field:"phoneNumber",headerName:"رقم الهاتف",sortable:!0},{headerName:"تحميل الصورة",cellRenderer:e=>{if(null!==e.data?._id){const t=document.createElement("div");return t.classList.add("btn-group"),t.innerHTML='\n                  <input\n                     className="upload__inputfile d-none"\n                     type="file"\n                     multiple=""\n                     data-max_length="20"\n                    name="imageData"\n                    accept="image/*"\n                    />\n            ',this.addClickEventListener(t,e.data),t}return""}},{headerName:"الصورة",cellRenderer:e=>{if(e.data?.urlPicture){const t=document.createElement("div");return t.classList.add("btn-group"),t.innerHTML=`\n                  <a href="${e.data?.urlPicture}" target="_blank" class="btn btn-info">فتح الصورة</a>`,t}return""}},{headerName:"إرسال",cellRenderer:this.renderSendButton},{field:"creationDate",headerName:"تاريخ الإنشاء",valueFormatter:e=>{const t=new Date(e.value),a=`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()} ${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}`;return a}},{field:"sendDate",headerName:"تاريخ الإرسال",valueFormatter:e=>{if(e.value){const t=new Date(e.value),a=`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()} ${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}`;return a}}}]}},methods:{updateSearchText(e){this.searchText=e},reloadData(){this.$refs.UsersTableRef.getData()},send_current_data(e){this.current_data=e},handleButtonClick(){const e=document.getElementById("exampleModal"),t=new(Ue().Modal)(e);this.current_data=null,t.show()},handleButtonClick2(){const e=document.getElementById("exampleModal"),t=new(Ue().Modal)(e);t.show()},async takePhoto(e,t){this.loading=!0;const a=t?._id;try{const t=e.target.files[0];if(t){const e=new FormData;e.append("imageData",t),e.append("orderId",a);const s=await S.A.post(`${_}/api/admin/uploadPhoto`,e,{headers:{"Content-Type":"multipart/form-data"}});200===s.status&&(this.fetchRequests(),alert("تم التقاط الصورة !")),this.loading=!1}}catch(s){this.loading=!1,console.error("Erreur lors de la prise de la photo :",s)}},async exportCSV(){try{await S.A.get(`${_}/api/admin/export-csv`)}catch(e){console.error(e.message)}},renderSendButton(e){const t=e.data?.urlPicture;if(t){const t=document.createElement("div");return t.classList.add("btn-group"),t.innerHTML='<button class="btn btn-success">إرسال</button>',this.addClickEventListenerButton(t,e.data),t}return""},addClickEventListenerButton(e,t){e.addEventListener("click",(()=>this.sendPicture(t)))},addClickEventListener(e,t){e.addEventListener("change",(e=>this.takePhoto(e,t)))},async fetchRequests(){try{const e=await S.A.get(`${_}/api/admin/requests`);this.requests=e.data,this.loading=!1}catch(e){this.loading=!1,console.erro("errer",e.message)}},filterByImage(e){this.resetFilters(),this.filteredImage=e},async sendPictureToManager(e,t){var a=A().stringify({token:"x1y1nwz2fbss9sj8",to:966563466639,image:e,caption:t}),s={method:"post",url:"https://api.ultramsg.com/instance82295/messages/image",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a};(0,S.A)(s).then((function(e){console.log(JSON.stringify(e.data))})).catch((function(e){console.log(e)}))},async sendPicture(e){try{this.loading=!0;const t=`${e?.urlPicture}`,a=A().stringify({token:"x1y1nwz2fbss9sj8",to:e?.phoneNumber,image:t,caption:"جزاكم الله خيرًا ، ونسأل الله أن يجعل ذلك في ميزان حسناتكم."}),s={method:"post",url:"https://api.ultramsg.com/instance82295/messages/image",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a},n=await(0,S.A)(s);console.log(JSON.stringify(n.data)),await S.A.post(`${_}/api/admin/update-send-date/${e?._id}`),await this.sendPictureToManager(t,e?.name),this.loading=!1,alert("تم إرسال الصورة إلى رقم الواتساب!")}catch(t){this.loading=!1,console.error(t)}},filterBySendDate(e){this.resetFilters(),this.filteredSendDate=e},resetFilters(){this.searchQuery="",this.filteredImage=null,this.filteredSendDate=null}},computed:{totalOrders(){return this.requests.length},ordersWithImages(){return this.requests.filter((e=>e.urlPicture)).length},ordersWithoutImages(){return this.requests.filter((e=>!e.urlPicture)).length},ordersWithSendDate(){return this.requests.filter((e=>e.sendDate)).length},ordersWithoutSendDate(){return this.requests.filter((e=>!e.sendDate)).length},filteredRequests(){let e=this.requests.filter((e=>e.name.includes(this.searchQuery)));return null!==this.filteredImage&&(e=e.filter((e=>this.filteredImage?e.urlPicture:!e.urlPicture))),null!==this.filteredSendDate&&(e=e.filter((e=>this.filteredSendDate?e.sendDate:!e.sendDate))),e}},mounted(){const e=document.querySelector(".modal-backdrop");e&&e.parentNode.removeChild(e),this.fetchRequests(),this.filteredImage=null,this.filteredSendDate=null}};const Jt=(0,r.A)(jt,[["render",w],["__scopeId","data-v-0786cb0a"]]);var Wt=Jt;const Xt=e=>((0,n.Qi)("data-v-1e1c2ae8"),e=e(),(0,n.jt)(),e),Qt={class:"login-container"},zt=Xt((()=>(0,n.Lk)("h1",null,"تسجيل الدخول",-1))),Gt=Xt((()=>(0,n.Lk)("label",null,"اسم المستخدم:",-1))),Kt=Xt((()=>(0,n.Lk)("label",null,"كلمة المرور:",-1))),Yt=Xt((()=>(0,n.Lk)("button",{type:"submit"},"تسجيل الدخول",-1))),Zt={key:0,class:"error"};function ea(e,t,a,o,l,r){return(0,n.uX)(),(0,n.CE)("div",Qt,[zt,(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>r.login&&r.login(...e)),["prevent"])),class:"login-form"},[Gt,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.username=e),required:""},null,512),[[s.Jo,l.username]]),Kt,(0,n.bo)((0,n.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),required:""},null,512),[[s.Jo,l.password]]),Yt,l.loginError?((0,n.uX)(),(0,n.CE)("span",Zt,(0,j.v_)(l.loginError),1)):(0,n.Q3)("",!0)],32)])}var ta={data(){return{username:"",password:"",loginError:""}},methods:{async login(){try{const e=await S.A.post(`${_}/api/admin/login`,{username:this.username,password:this.password});console.log("response",e),localStorage.setItem("isAuthenticated",!0),this.$router.push({name:"Admin"})}catch(e){e.response&&401===e.response.status?this.loginError="اسم المستخدم أو كلمة المرور غير صحيحة. الرجاء المحاولة مرة أخرى.":this.loginError="حدث خطأ أثناء عملية تسجيل الدخول. الرجاء المحاولة مرة أخرى لاحقًا."}}}};const aa=(0,r.A)(ta,[["render",ea],["__scopeId","data-v-1e1c2ae8"]]);var sa=aa;const na=[{path:"/",name:"Home",component:Wt,meta:{requiresAuth:!0}},{path:"/admin",name:"Admin",component:Wt,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:sa}],oa=(0,u.aE)({history:(0,u.LA)(),routes:na});oa.beforeEach(((e,t,a)=>{const s=localStorage.getItem("isAuthenticated");e.matched.some((e=>e.meta.requiresAuth))?s?a():a({name:"Login"}):a()}));var la=oa;(0,s.Ef)(d).mount("#app");const ra=(0,s.Ef)(d);ra.use(la),document.addEventListener("click",(function(e){e.target.classList.contains("modal-backdrop")&&e.target.remove()})),ra.use(c.Ay),ra.mount("#app")},2634:function(){}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,s,n,o){if(!s){var l=1/0;for(c=0;c<e.length;c++){s=e[c][0],n=e[c][1],o=e[c][2];for(var r=!0,i=0;i<s.length;i++)(!1&o||l>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[i])}))?s.splice(i--,1):(r=!1,o<l&&(l=o));if(r){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[s,n,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,o,l=s[0],r=s[1],i=s[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(i)var c=i(a)}for(t&&t(s);d<l.length;d++)o=l[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},s=self["webpackChunkfront"]=self["webpackChunkfront"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(2385)}));s=a.O(s)})();
//# sourceMappingURL=app.3d3e467d.js.map